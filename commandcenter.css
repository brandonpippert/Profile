:root{
--bg:#ffffff;--text:#111827;--muted:#6b7280;--brand:#2563eb;--brand-ink:#1e3a8a;--card:#f9fafb;--line:#e5e7eb;--chip:#eff6ff;
--leading:1.6;--accent:#2563eb;--success:#10b981;--warning:#f59e0b;--error:#ef4444;--ai:#7c3aed;
}
[data-theme="dark"]{
--bg:#0f172a;--text:#f1f5f9;--muted:#94a3b8;--brand:#3b82f6;--brand-ink:#1e40af;--card:#1e293b;--line:#3a4a63;--chip:#1e40af;
--success:#34d399;--warning:#fbbf24;--error:#f87171;--ai:#a78bfa;
}
[data-theme="dark"] .heatmap-day { background: #2b2f36; }

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
* { animation: none !important; transition: none !important; }
.status-dot.active { animation: none; }
}

/* Focus styles for accessibility */
:focus-visible { outline: 2px solid var(--brand); outline-offset: 2px; }

*{box-sizing:border-box;margin:0;padding:0;}
html,body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);background:var(--bg);transition:background-color 0.3s ease, color 0.3s ease;}
a{color:var(--brand);text-decoration:none} a:hover{color:var(--brand-ink);text-decoration:none}
.container{max-width:1400px;margin:0 auto;padding:24px}

.topbar{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 0;border-bottom:1px solid var(--line)}
.brand{font-weight:700;letter-spacing:.2px;display:flex;align-items:center;gap:8px;}
.nav{display:flex;gap:14px;align-items:center}
.nav a{color:var(--muted);font-weight:600;transition:color .25s ease}
.nav a:hover{color:var(--text)}

.dashboard-header {text-align:center;margin:3rem 0;}
.dashboard-title {font-size:clamp(32px,5vw,48px);font-weight:700;letter-spacing:-0.02em;margin:0.5rem 0;background:linear-gradient(135deg,var(--brand),var(--ai));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.dashboard-subtitle {color:var(--muted);font-size:1.2rem;max-width:600px;margin:0 auto;}

.dashboard-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem;margin-bottom:3rem;}

.card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:1.5rem;box-shadow:0 20px 60px rgba(0,0,0,.08);transition:transform .15s ease,box-shadow .2s ease;position:relative;overflow:hidden;}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--brand),var(--ai));}
.card:hover{transform:translateY(-2px);box-shadow:0 28px 80px rgba(0,0,0,.12)}
.heavy { content-visibility:auto; contain-intrinsic-size: 600px 400px; }

.card-header {display:flex;align-items:center;gap:0.75rem;margin-bottom:1.5rem;padding-bottom:0.75rem;border-bottom:1px solid var(--line);} 
.card-header i {color:var(--brand);font-size:1.25rem;}
.card-header h2 {font-size:1.25rem;font-weight:600;margin:0;}

.progress-grid {display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem;}
.progress-ring {text-align:center;position:relative;display:flex;flex-direction:column;align-items:center;}
.progress-svg {width:100px;height:100px;transform:rotate(-90deg);overflow: visible;}
.progress-bg {fill:none;stroke:var(--line);stroke-width:8;}
.progress-fill {fill:none;stroke-width:8;stroke-linecap:round;transition:stroke-dashoffset 0.5s ease;}
.progress-value {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.2rem;font-weight:700;color:var(--text);} 
.progress-label {font-weight:600;color:var(--text);margin-top:0.5rem;}
.progress-percent {font-size:0.9rem;color:var(--muted);} 

.learning-item {padding:1rem 0;border-bottom:1px solid var(--line);transition:all 0.2s ease;border-radius:8px;padding-left:0.5rem;margin-left:-0.5rem;}
.learning-item:hover {background:rgba(59,130,246,0.05);} 
.learning-item:last-child {border-bottom:none;} 
.learning-date {font-size:0.9rem;color:var(--brand);font-weight:600;margin-bottom:0.5rem;} 
.learning-content {color:var(--text);line-height:var(--leading);} 

.actions-grid {display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;} 
.action-btn {display:flex;flex-direction:column;align-items:center;gap:0.5rem;padding:1rem;background:var(--chip);border:1px solid var(--line);border-radius:12px;text-decoration:none;color:var(--text);transition:all 0.2s ease;text-align:center;} 
.action-btn:hover {background:var(--brand);color:white;border-color:var(--brand);transform:translateY(-2px);box-shadow:0 8px 20px rgba(37,99,235,0.3);} 
.action-btn i {font-size:1.5rem;} 

.stats-grid {display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;width:100%;}
.stat-card {text-align:center;padding:1rem;background:rgba(255,255,255,0.03);border-radius:12px;position:relative;overflow:hidden;} 
.stat-number {font-size:2rem;font-weight:700;color:var(--brand);margin-bottom:0.25rem;}
.stat-label {font-size:0.9rem;color:var(--muted);} 
.copy-icon {position:absolute;top:8px;right:8px;cursor:pointer;opacity:.6}
.copy-icon:hover{opacity:1}

.status-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;} 
.status-item {display:flex;align-items:center;gap:0.75rem;padding:0.75rem;background:rgba(255,255,255,0.03);border-radius:8px;} 
.status-dot {width:10px;height:10px;border-radius:50%;background:#10b981;} 
.status-dot.active {animation:pulse 2s infinite;} 

.bookmarks-grid {display:flex;flex-wrap:wrap;gap:0.5rem;} 
.bookmark-chip {display:inline-block;background:var(--chip);border:1px solid var(--line);padding:6px 12px;border-radius:999px;font-size:12px;text-decoration:none;color:var(--text);transition:all 0.2s ease;} 
.bookmark-chip:hover {background:var(--brand);color:white;border-color:var(--brand);transform:translateY(-1px);} 

.learning-track {display:flex;align-items:center;gap:1rem;padding:0.75rem;background:rgba(255,255,255,0.03);border-radius:8px;margin-bottom:0.75rem;} 
.learning-track:last-child {margin-bottom:0;} 
.learning-icon {width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;font-size:1.2rem;} 

.btn {display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);padding:8px 16px;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.2s ease;background:var(--card);color:var(--text);text-decoration:none;} 
.btn.primary {background:var(--brand);color:white;border-color:var(--brand);} 
.btn.ai {background:var(--ai);color:white;border-color:var(--ai);} 
.btn:hover {transform:translateY(-1px);} 
.btn.primary:hover {background:var(--brand-ink);} 
.btn.ai:hover {background:#6d28d9;} 

.full-width {grid-column:1/-1;} 
.footer{padding:24px 0;color:var(--muted);font-size:14px;border-top:1px solid var(--line);display:flex;justify-content:space-between;flex-wrap:wrap;gap:12px}
.theme-toggle{background:none;border:none;color:var(--muted);cursor:pointer;padding:8px;border-radius:8px;transition:all 0.2s ease;} 
.theme-toggle:hover{background:var(--card);color:var(--text);} 

/* Heatmap Styles */
.heatmap-container {margin-top: 1rem;}
.heatmap-header {display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;}
.heatmap {display: grid; grid-template-columns: repeat(52, 1fr); gap: 3px; margin-bottom: 0.5rem;}
.heatmap-day {width: 12px; height: 12px; border-radius: 2px; background: #ebedf0; cursor: pointer; position: relative;}
.heatmap-day[data-level="1"] {background: #9be9a8;}
.heatmap-day[data-level="2"] {background: #40c463;}
.heatmap-day[data-level="3"] {background: #30a14e;}
.heatmap-day[data-level="4"] {background: #216e39;}
.heatmap-day:hover {border: 1px solid var(--text); transform: scale(1.2);} 
.heatmap-legend {display: flex; align-items: center; gap: 5px; font-size: 0.8rem; color: var(--muted);} 
.heatmap-legend-item {display: flex; align-items: center; gap: 3px;} 
.heatmap-tooltip {position: fixed; background: var(--text); color: var(--bg); padding: 6px 10px; border-radius: 4px; font-size: 0.8rem; z-index: 1000; pointer-events: none; opacity: 0; transition: opacity 0.2s; white-space: nowrap;} 

/* Glow effects */
.glow {box-shadow: 0 0 20px rgba(37, 99, 235, 0.2);} 
.ai-glow {box-shadow: 0 0 20px rgba(124, 58, 237, 0.3);} 

/* Achievement badges */
.badges-grid {display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 1rem;} 
.badge {width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; font-size: 1.2rem; position: relative;} 
.badge::after {content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b, #d97706); z-index: -1; opacity: 0.7;} 
.badge.completed {background: linear-gradient(135deg, var(--success), #059669);} 
.badge.completed::after {background: linear-gradient(135deg, var(--success), #059669);} 
.badge.ai {background: linear-gradient(135deg, var(--ai), #6d28d9);} 
.badge.ai::after {background: linear-gradient(135deg, var(--ai), #6d28d9);} 

/* Terminal style output */
.terminal {background: #1a1b26; color: #a9b1d6; border-radius: 8px; padding: 1rem; font-family: 'Courier New', monospace; font-size: 0.9rem; overflow: auto; max-height: 200px;}
.terminal-line {margin-bottom: 0.25rem;}
.terminal-prompt {color: #7dcfff;}
.terminal-command {color: #9ece6a;}
.terminal-output {color: #c0caf5;}

/* Sparkline charts */
.sparkline {height: 40px; display: flex; align-items: flex-end; gap: 2px; margin-top: 0.5rem;} 
.sparkline-bar {background: var(--brand); border-radius: 1px; flex: 1; min-height: 3px;} 

/* AI Assistant */
.ai-assistant {position: fixed; bottom: 20px; right: 20px; z-index: 1000;}
.ai-toggle {position:relative;width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--ai), #6d28d9); border: none; color: white; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 20px rgba(124, 58, 237, 0.4); transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;}
.ai-toggle:hover {transform: scale(1.1); box-shadow: 0 6px 25px rgba(124, 58, 237, 0.6);} 
.ai-unread {position:absolute;top:8px;right:8px;width:10px;height:10px;border-radius:50%;background:#ef4444;display:none;}
.ai-panel {position: absolute; bottom: 70px; right: 0; width: 350px; background: var(--card); border: 1px solid var(--line); border-radius: 18px; box-shadow: 0 20px 60px rgba(0,0,0,.2); padding: 1.5rem; display: none;}
.ai-panel.show {display: block; animation: slideUp 0.3s ease;} 
.ai-header {display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--line);} 
.ai-messages {max-height: 300px; overflow-y: auto; margin-bottom: 1rem;} 
.ai-message {padding: 0.75rem; border-radius: 12px; margin-bottom: 0.75rem; max-width: 85%;} 
.ai-message.user {background: var(--brand); color: white; margin-left: auto;} 
.ai-message.bot {background: var(--chip); color: var(--text);} 
.ai-input {display: flex; gap: 0.5rem;} 
.ai-input input {flex: 1; padding: 0.75rem; border: 1px solid var(--line); border-radius: 8px; background: var(--bg); color: var(--text);} 

/* AI Recommendations */
.ai-recommendation {padding: 1rem; background: rgba(124, 58, 237, 0.05); border-radius: 12px; margin-bottom: 1rem; border-left: 4px solid var(--ai);} 
.ai-recommendation:last-child {margin-bottom: 0;} 
.ai-recommendation h4 {margin: 0 0 0.5rem 0; color: var(--ai);} 
.ai-recommendation p {margin: 0; font-size: 0.9rem;} 

/* Breathing Text Animation */
.breathe-text {
font-family: 'Pacifico', cursive;
font-size: 3rem;
background: linear-gradient(45deg, var(--brand), var(--ai));
-webkit-background-clip: text;
background-clip: text;
color: transparent;
padding: 10px;
animation: breatheWave 8s infinite ease-in-out;
text-shadow: 0 0 20px rgba(37, 99, 235, 0.3);
filter: drop-shadow(0 0 15px rgba(124, 58, 237, 0.2));
pointer-events: none;
background-color: transparent !important;
text-align: center;
margin-bottom: 20px;
}

@keyframes breatheWave {
0%, 100% {
transform: 
perspective(400px)
rotateX(4deg)
rotateY(0deg)
rotateZ(-0.5deg)
scale(1);
letter-spacing: 2px;
background-position: 0% 50%;
}
25% {
transform: 
perspective(400px)
rotateX(6deg)
rotateY(2deg)
rotateZ(-1deg)
scale(1.03);
letter-spacing: 3px;
background-position: 25% 50%;
}
50% {
transform: 
perspective(400px)
rotateX(4deg)
rotateY(0deg)
rotateZ(0.5deg)
scale(1.05);
letter-spacing: 4px;
background-position: 50% 50%;
}
75% {
transform: 
perspective(400px)
rotateX(6deg)
rotateY(-2deg)
rotateZ(1deg)
scale(1.03);
letter-spacing: 3px;
background-position: 75% 50%;
}
}

/* Breathing Orb Styles */
.breath-container {width: 100%;height: 380px;position: relative;border-radius: 16px;overflow: hidden;background: var(--card);border: 1px solid var(--line);display: flex;flex-direction: column;align-items: center;margin-top: 0;}
.orb-container {width: 180px;height: 180px;margin: 10px 0 20px;position: relative;display: flex;justify-content: center;align-items: center;}
.glowing-orb {width: 80px;height: 80px;background: linear-gradient(135deg, var(--brand), var(--ai));border-radius: 50%;transition: all 2.4s cubic-bezier(0.33, 1, 0.68, 1);box-shadow: 0 0 15px 3px rgba(37, 99, 235, 0.2), 0 0 30px 6px rgba(124, 58, 237, 0.1), inset 0 4px 15px rgba(255, 255, 255, 0.3);position: relative;z-index: 2;transform: scale(0.8);will-change: transform, box-shadow, background, filter;filter: brightness(1);} 
.breath-instruction {font-size: 1.3rem;color: var(--text);font-weight: 500;text-transform: uppercase;letter-spacing: 1.5px;margin-bottom: 10px;transition: opacity 0.8s ease, transform 2.4s cubic-bezier(0.33, 1, 0.68, 1);display: flex;flex-direction: column;align-items: center;} 
.breath-countdown {font-size: 2.2rem;font-weight: 500;margin-top: 5px;color: var(--text);min-height: 40px;min-width: 40px;text-align: center;transition: transform 0.3s ease;} 
.breath-controls {position: absolute;top: 15px;left: 15px;display: flex;gap: 10px;z-index: 3;} 
.breath-mute-btn, .breath-pause-btn {background: none;border: none;color: var(--muted);font-size: 18px;cursor: pointer;transition: all 0.3s;width: 32px;height: 32px;border-radius: 50%;display: flex;align-items: center;justify-content:center;background: rgba(255,255,255,0.1);} 
.breath-mute-btn:hover, .breath-pause-btn:hover {color: var(--text);background: rgba(255,255,255,0.2);transform: scale(1.1);} 
.glow-pulse {position: absolute;width: 80px;height: 80px;background: radial-gradient(circle, rgba(37, 99, 235, 0.3) 0%, rgba(37, 99, 235, 0) 70%);border-radius: 50%;opacity: 0;transition: all 2.4s cubic-bezier(0.33, 1, 0.68, 1);z-index: 1;transform-origin: center;will-change: transform, opacity;pointer-events: none;} 
.breath-volume-control {position: absolute;bottom: 18px;left: 18px;width: 90px;z-index: 3;opacity: 0.7;transition: opacity 0.3s ease;} 
.breath-volume-control:hover {opacity: 1;} 
.breath-volume-control input {width: 100%;cursor: pointer;accent-color: var(--brand);} 
.breath-watermark {position: absolute;bottom: 20px;right: 18px;color: var(--muted);font-size: 0.65rem;font-weight: 300;z-index: 2;} 

/* Skip to content for accessibility */
.skip-link {position: absolute; top: -40px; left: 6px; background: var(--brand); color: white; padding: 8px; border-radius: 4px; text-decoration: none; z-index: 10000; transition: top 0.3s;}
.skip-link:focus {top: 6px;}

/* Notes Section */
.notes-container {height: 200px;display: flex;flex-direction: column;}
.notes-textarea {flex: 1;background: var(--bg);border: 1px solid var(--line);border-radius: 8px;padding: 12px;color: var(--text);font-family: inherit;resize: none;margin-bottom: 10px;}
.notes-textarea:focus {outline: none;border-color: var(--brand);} 
.notes-actions {display: flex;justify-content: space-between;} 
.notes-char-count {font-size: 0.8rem;color: var(--muted);align-self: center;} 

@keyframes slideUp {from {transform: translateY(20px); opacity: 0;}to {transform: translateY(0); opacity: 1;}} 
@keyframes pulse {0%{opacity:1;}50%{opacity:0.5;}100%{opacity:1;}} 

.toast {position:fixed;bottom:20px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--text);color:var(--bg);padding:12px 20px;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,0.2);transition:all 0.3s ease;z-index:1000;opacity:0;}
.toast.show {transform:translateX(-50%) translateY(0);opacity:1;}

/* Incidents */
.incidents-list{display:grid;gap:12px}
.incident {display:grid;grid-template-columns:1fr auto;gap:.5rem;padding:.75rem;border:1px solid var(--line);border-radius:10px;background:rgba(255,255,255,0.03)}
.incident.high {border-left:4px solid var(--error)}
.incident.med  {border-left:4px solid var(--warning)}
.incident.low  {border-left:4px solid var(--success)}
.incident-meta{font-size:.85rem;color:var(--muted)}
.incident-actions{display:flex;gap:.5rem;align-items:center}
.runbook-btn{border:1px solid var(--line);background:var(--card);padding:.4rem .6rem;border-radius:8px;cursor:pointer;color:var(--text);}
.runbook-btn:hover{background:var(--chip);}

/* Modal (admin gate) */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);backdrop-filter:saturate(180%) blur(6px);display:none;align-items:center;justify-content:center;z-index:2000}
.modal-overlay.show{display:flex;animation:fadeIn .2s ease}
.modal{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 30px 80px rgba(0,0,0,.25);width:min(92vw,420px);padding:1.25rem}
.modal h3{margin:0 0 .75rem 0}
.modal .row{display:grid;gap:.5rem;margin:.5rem 0}
.modal input{padding:.6rem .75rem;border:1px solid var(--line);border-radius:10px;background:var(--bg);color:var(--text)}
.modal-actions{display:flex;gap:.5rem;justify-content:flex-end;margin-top:1rem}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* Chart containers - FIXED */
.chart-container {
position: relative;
height: 40px;
width: 100%;
margin-top: 0.5rem;
overflow: hidden;
}
.slo-chart-container {
position: relative;
height: 120px;
width: 100%;
margin-top: 1rem;
}

@media (max-width:768px){
.dashboard-grid{grid-template-columns:1fr;}
.progress-grid,.actions-grid,.stats-grid{grid-template-columns:1fr;}
.container{padding:1rem;}
.heatmap{grid-template-columns: repeat(26, 1fr);}
.ai-panel{width: 300px; right: -20px;}
.breathe-text{font-size:2.5rem;}
.breath-container { height: 320px; }
}
